# =====================================================
# Memory System Configuration Template (0G-Storage)
# 记忆系统配置模板（使用 0G-Storage 作为 KV 存储）
# =====================================================
#
# SECURITY NOTICE / 安全提示:
# - Copy this file to .env and fill in your actual API keys
# - Never commit .env file to version control
# - Keep your API keys secure and private
# - 将此文件复制为.env并填入您的实际API密钥
# - 永远不要将.env文件提交到版本控制
# - 保护好您的API密钥安全
#
# SETUP INSTRUCTIONS / 设置说明:
# 1. cp env.template.0g.example .env
# 2. Edit .env with your actual values
# 3. The system will automatically load these values
# =====================================================


# ===================
# LLM Configuration / LLM配置
# ===================

LLM_PROVIDER=openai
# evaluation 请用 openai/gpt-4.1-mini 以保证结果可复现性，demo 可使用 x-ai/grok-4-fast 平衡速度/成本/效果
LLM_MODEL=gpt-4o-mini
LLM_BASE_URL=https://api.openai.com/v1
# TODO: Replace with your actual API key from your LLM provider.
LLM_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=16384
# openrouter/其他的供应商设置，默认为 default，用 openrouter 的 qwen3 时建议设置为 cerebras
# LLM_OPENROUTER_PROVIDER=cerebras

# ===================
# Vectorize Service Configuration / 向量化服务配置
# ===================

# Provider Options: deepinfra, vllm
VECTORIZE_PROVIDER=deepinfra

# API Key (Required for DeepInfra, optional for vLLM)
# TODO: Replace with your actual API key from your embedding service provider.
VECTORIZE_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Base URL
# DeepInfra Default: https://api.deepinfra.com/v1/openai
# vLLM Default: http://localhost:8000/v1
VECTORIZE_BASE_URL=https://api.openai.com/v1

# Model Name
# DeepInfra Example: Qwen/Qwen3-Embedding-4B
# vLLM Example: Qwen3-Embedding-4B
VECTORIZE_MODEL=text-embedding-3-small

# Advanced Settings
VECTORIZE_TIMEOUT=30
VECTORIZE_MAX_RETRIES=3
VECTORIZE_BATCH_SIZE=10
VECTORIZE_MAX_CONCURRENT=5
VECTORIZE_ENCODING_FORMAT=float
# Set to 0 to disable dimensions parameter (required for some vLLM models), otherwise 1024
VECTORIZE_DIMENSIONS=1024


# ===================
# Rerank Service Configuration / 重排序服务配置
# ===================

# Provider Options: deepinfra, vllm
RERANK_PROVIDER=deepinfra

# API Key (Required for DeepInfra, optional for vLLM)
RERANK_API_KEY=xxxxx

# Base URL
# DeepInfra Default: https://api.deepinfra.com/v1/inference
# vLLM Default: http://localhost:12000/score
RERANK_BASE_URL=https://api.deepinfra.com/v1/inference

# Model Name
# DeepInfra Example: Qwen/Qwen3-Reranker-4B
# vLLM Example: Qwen3-Reranker-4B
RERANK_MODEL=Qwen/Qwen3-Reranker-4B

# Advanced Settings
RERANK_TIMEOUT=30
RERANK_MAX_RETRIES=3
RERANK_BATCH_SIZE=10
RERANK_MAX_CONCURRENT=5


# ===================
# Redis Configuration / Redis配置
# ===================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=8
REDIS_SSL=false

# ===================
# MongoDB Configuration / MongoDB配置
# ===================

MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USERNAME=admin
MONGODB_PASSWORD=memsys123
MONGODB_DATABASE=memsys
MONGODB_URI_PARAMS=socketTimeoutMS=15000&authSource=admin

# ===================
# KV Storage Configuration / KV存储配置
# ===================

KV_STORAGE_TYPE=zerog


# ===================
# Elasticsearch Configuration / Elasticsearch配置
# ===================

ES_HOSTS=http://localhost:19200
ES_USERNAME=
ES_PASSWORD=
ES_VERIFY_CERTS=false
SELF_ES_INDEX_NS=memsys

# ===================
# Milvus Configuration / Milvus向量数据库配置
# ===================

MILVUS_HOST=localhost
MILVUS_PORT=19530
SELF_MILVUS_COLLECTION_NS=memsys

# ============================================================
# Startup Data Sync Configuration / 启动数据同步配置
# ============================================================
# Automatically validates and syncs Milvus data against MongoDB on startup
# 启动时自动验证Milvus数据与MongoDB的一致性并同步缺失的数据
#
# NOTE: Auto-sync only runs when starting the backend (uv run python src/run.py)
# It does NOT run for demo/test scripts (uv run python src/bootstrap.py xxx.py)
# 注意: 自动同步仅在启动后端时运行 (uv run python src/run.py)
# 不会在运行demo/测试脚本时运行 (uv run python src/bootstrap.py xxx.py)

# Enable automatic data validation and sync on startup (true/false)
# 是否启用启动时的自动数据验证和同步
STARTUP_SYNC_ENABLED=true

# Number of days to check (validate documents created in last N days)
# 检查最近N天的文档（验证最近N天创建的文档）
# - Set to 0: FULL DATABASE VALIDATION (all documents, slower but comprehensive)
#   设置为0: 全量数据库验证（所有文档，较慢但全面）
# - Set to positive number: Only check recent documents (faster, recommended for quick checks)
#   设置为正数: 仅检查最近的文档（更快，适用于快速检查）
# Examples / 示例:
#   STARTUP_SYNC_DAYS=0   → Full validation (DEFAULT - ensures complete consistency)
#                            全量验证（默认值 - 确保完全一致性）
#   STARTUP_SYNC_DAYS=1   → Last 24 hours (very fast)
#                            最近24小时（非常快）
#   STARTUP_SYNC_DAYS=7   → Last week (quick check)
#                            最近一周（快速检查）
#   STARTUP_SYNC_DAYS=30  → Last month (thorough recent check)
#                            最近一个月（彻底的近期检查）
# Default: 0 (full database sync)
STARTUP_SYNC_DAYS=0

# Enable Milvus validation (true/false)
# 是否启用Milvus验证
STARTUP_SYNC_MILVUS=true

# Enable Elasticsearch validation (true/false)
# 是否启用Elasticsearch验证
STARTUP_SYNC_ES=true

# Batch size for sync operations (documents per batch)
# 同步操作的批次大小（每批文档数）
# Default: 500
STARTUP_SYNC_BATCH_SIZE=500

# Maximum documents to sync per type (safety limit)
# 每种类型最多同步的文档数（安全限制）
# Set to 0 for unlimited (use with caution on full validation)
# 设置为0表示无限制（在全量验证时请谨慎使用）
# Default: 10000
STARTUP_SYNC_MAX_DOCS=10000

# ===================
# API Server Configuration / API服务器配置
# ===================

# Server host and port (used by src/run.py)
MEMSYS_HOST=0.0.0.0
MEMSYS_PORT=1995

# V3 API Base URL (用于 chat_with_memory.py 等客户端)
API_BASE_URL=http://localhost:1995
# EverMemOS Claude Code Integration (hooks使用此变量)
EVERMEMOS_BASE_URL=http://localhost:1995

# ===================
# Environment & Logging / 环境与日志配置
# ===================

LOG_LEVEL=INFO
ENV=dev
PYTHONASYNCIODEBUG=1
MEMORY_LANGUAGE=en

# ========================================
# 0G-Storage Configuration
# ========================================

# Read node (single URL)
# ZEROG_READ_NODE=http://34.31.1.26:6789  # remote public node
ZEROG_READ_NODE=http://127.0.0.1:6789      # local node

# RPC endpoint
ZEROG_RPC_URL=https://evmrpc-testnet.0g.ai

# Unified Stream ID (all collections share this stream)
# TODO: Replace with the 64-character hex stream ID you have registered on the 0G network.
ZEROG_STREAM_ID=0000000000000000000000000000000000000000000000000000000000000000

# ⚠️ IMPORTANT: Wallet private key (KEEP THIS SECURE! Never commit to version control.)
# TODO: Replace with the 64-character hex private key of your 0G-funded EVM wallet.
ZEROG_WALLET_KEY=0000000000000000000000000000000000000000000000000000000000000000

ZEROG_INDEXER_URL=https://indexer-storage-testnet-turbo.0g.ai
ZEROG_FLOW_ADDRESS=0x22E03a6A89B950F1c82ec5e74F8eCa321a105296
